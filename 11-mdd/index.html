<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
<title>Model Driven Development</title>
<meta name="description" content="Practical introduction to Model Driven Development">
<meta name="author" content="Danilo Pianini">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link rel="stylesheet" href="/reveal-js/dist/reset.css">
<link rel="stylesheet" href="/reveal-js/dist/reveal.css">
  <link rel="stylesheet" href="/css/custom-theme.min.d87831e776998ef49522b04eb4dc09e99de17c72203f12dba6bc2c43887c8877.css" id="theme"><link rel="stylesheet" href="/highlight-js/default.min.css">
<link rel="stylesheet" href="https://gitcdn.link/repo/DanySK/css-blur-animation/master/blur.css">
<link href="https://fonts.googleapis.com/css?family=Roboto Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oxygen Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Ubuntu Mono" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<script src="https://unibo-spe.github.io//plantuml.js"></script>

  </head>
  <body>
    
    <div class="reveal">
      <div class="slides">
  

    <section><style>
.reveal blockquote {
    font-family: 'Georgia';
}
</style>
<h1 id="model-driven-development">Model Driven Development</h1>
</section><section>
<h2 id="lecture-goals">Lecture goals</h2>
<ul>
<li>Understand <strong>metamodelling</strong></li>
<li>Understand <strong>domain specific languages</strong></li>
<li>Practice with <strong>model driven development</strong> in <em>Xtext</em></li>
</ul>
</section><section>
<h2 id="meta-modelling-nomenclature">Meta-modelling nomenclature</h2>
<ol start="0">
<li>
<p>(Abstract) <strong>Language</strong> $\approx$ (abstract) <em>syntax</em> + <em>semantics</em></p>
</li>
<li>
<p><strong>Model</strong> $\approx$ the abstract language by which we describe the possible entities involved in a <strong>domain</strong></p>
<ul>
<li>the model <strong>abstracts</strong> a number of similar systems rooted in the domain</li>
<li>each system is an <em>instance</em> of the model it has been designed from</li>
<li>a model is a <em>template</em> for several systems</li>
</ul>
</li>
<li>
<p>In which <em>language</em> is the model <strong>expressed</strong>?</p>
<ul>
<li><strong>Meta-model</strong> $\approx$ the abstract language by which we describe <strong>models</strong></li>
<li>for instance <strong>UML</strong> is the meta-model behind <strong>object-oriented programming</strong>
<ul>
<li>UML $\equiv$ <a href="https://www.uml.org/">Unified Modeling Language</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p>In which language is the <em>meta</em>-model expressed?</p>
<ul>
<li><strong>Meta-meta-model</strong> $\approx$ the abstract language by which we describe <strong>meta-models</strong></li>
<li>for instance <strong>MOF</strong> is the meta-meta-model behind <strong>UML</strong> according to <strong>OMG</strong>
<ul>
<li>MOF $\equiv$ <a href="https://www.omg.org/spec/MOF">Meta-Object Facility</a></li>
<li>OMG $\equiv$ <a href="https://www.omg.org/">Object Management Group</a></li>
</ul>
</li>
</ul>
</li>
</ol>
</section><section>
<h2 id="meta-model-hierarchy">Meta-model hierarchy</h2>
<p>cf. <a href="https://www.omg.org/ocup-2/documents/Meta-ModelingAndtheMOF.pdf">https://www.omg.org/ocup-2/documents/Meta-ModelingAndtheMOF.pdf</a></p>
<p><img src="metamodelling-architecture.png" alt="Meta-modelling architecture concept"></p>
</section><section>
<h2 id="meta-model-hierarchy-example">Meta-model hierarchy example</h2>
<p><img src="metamodelling-architecture-example.png" alt="Meta-modelling architecture example"></p>
</section><section>
<h2 id="why-are-meta-models-important">Why are meta-models important?</h2>
<ul>
<li>
<p><strong>Meta-models</strong> are the very first thing you should try to identify whenever approaching a new <strong>technology</strong></p>
</li>
<li>
<p>If you grasp the meta-model, you grasp the <strong>essence</strong> of the technology</p>
<ul>
<li>which may be same for many other technologies</li>
</ul>
</li>
<li>
<p>E.g. after you learned the <em>basics of OOP</em> (classes, methods, objects, etc.) you may easily learn <em>any</em> <strong>other OOP language</strong></p>
<ul>
<li>by simply asking yourself how <em>each meta-model element</em> is <strong>expressed</strong> in the new language
<ul>
<li>e.g. how are classes / methods / objects expressed in the new language?</li>
</ul>
</li>
</ul>
</li>
<li>
<p>When you model a domain (e.g. with DDD) you are always exploiting some <strong>meta-model</strong></p>
<ul>
<li>whether you are aware of it or not</li>
</ul>
</li>
</ul>
</section><section>
<h2 id="model-driven-whatever">Model-driven whatever</h2>
<ul>
<li>
<p>Several, slightly similar names, make create <em>confusion</em></p>
<ul>
<li>e.g. model-driven engineering / development / architecture / etc.</li>
</ul>
</li>
<li>
<p>Please read <em>Martin Fowler</em>’s article on <a href="https://martinfowler.com/bliki/ModelDrivenArchitecture.html">Model-Driven Software Architecture</a> to clarify</p>
</li>
<li>
<p>Despite the name the key ideas can be summarised as follow:</p>
<ol>
<li>
<p><em>software engineering</em> workflow should start by <strong>modelling the domain</strong> at hand carefully</p>
<ul>
<li>e.g. with DDD</li>
<li>as opposed to focussing on algorithms and data structures</li>
</ul>
</li>
<li>
<p>the production of a runnable implementation should be <strong>automated</strong> as much as possible</p>
<ul>
<li>e.g. by <strong>generating</strong> code from models</li>
<li>as opposed to writing code by hand</li>
</ul>
</li>
</ol>
</li>
</ul>
</section><section>
<h2 id="about-code-generation-from-models">About code generation from models</h2>
<ul>
<li>
<p>Assumption: the model is expressed by means of some <strong>formal language</strong></p>
</li>
<li>
<p><strong>Formal</strong> language $\approx$ interpretable by a machine</p>
</li>
<li>
<p>Formality is a <strong>prerequisite</strong> for <strong>automation</strong></p>
<ol>
<li>the model is <strong>parsed</strong> by a machine</li>
<li>the model is <strong>transformed</strong> into another formal language (e.g. <em>OO programming language</em>)</li>
<li>the transformed model is <strong>rendered</strong> into a file (e.g. <em>source code</em>)</li>
</ol>
</li>
<li>
<p>Is <strong>UML</strong> adequate? Is it the only choice? <em>Any alternative?</em></p>
<ul>
<li>UML has a formal syntax and semantics (reified into <strong>graphical representation rules</strong>)</li>
<li><strong>rarely enforced</strong> by software tools</li>
<li>furthermore UML is <strong>general-purpose</strong>
<ul>
<li>only practical for <em>software engineers</em></li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section>


<section data-shortcode-section="">
<h2 id="towards-domain-specific-languages">Towards domain specific languages</h2>
<ul>
<li>
<p><strong>Domain-specific Languages</strong> (DSL) are <em>programming</em> / <em>description</em> / <em>specification languages</em> targetting one <strong>particular</strong> class of problems</p>
<ul>
<li>e.g. they are <em>not</em> meant to address all possible problems, but just the ones they are designed for</li>
</ul>
</li>
<li>
<p>As opposed to <strong>general-purpose languages</strong> (GPL) which are targetting <strong>as many</strong> classes of problems <strong>as possible</strong></p>
<ul>
<li>the programming languages you learned so far are GPL</li>
</ul>
</li>
<li>
<p>DSL may act as <strong>custom meta-models</strong> for a given domain</p>
</li>
<li>
<p>Examples of DSLs you may already know:</p>
<ul>
<li><em>regular expressions</em> for text processing</li>
<li><em>SQL</em> for database querying</li>
<li><em>CSS</em> for styling web pages</li>
<li><em>HTML</em> for describing web pages content</li>
<li><em>DOT</em> for graph visualisation</li>
<li><em>PlantUML</em> for UML diagrams visualisation</li>
<li><em>Gherkin</em> for Behavior-Driven Development (BDD)</li>
<li><em>VHDL</em> for hardware description</li>
</ul>
</li>
</ul>
</section><section>
<h2 id="dsl-examples-pt-1">DSL Examples (pt. 1)</h2>
<h3 id="dot-a-dsl-to-visualise-graphs">DOT: a DSL to visualise graphs</h3>
<div class="multiCol">
    <div class="col ">
    <pre tabindex="0"><code class="nohighlight" data-noescape="">digraph G {
    size ="4,4";
    main [shape=box];
    main -&gt; parse [weight=8];
    parse -&gt; execute;
    main -&gt; init [style=dotted];
    main -&gt; cleanup;
    execute -&gt; { make_string; printf}
    init -&gt; make_string;
    edge [color=red];
    main -&gt; printf [style=bold,label="100 times"];
    make_string [label="make a string"];
    node [shape=box,style=filled,color=".7 .3 1.0"];
    execute -&gt; compare;
}
</code></pre>
</div>
<div class="col ">
    <p><img src="./dot-examle.svg" alt="Graphical representation of the DOT code on the left"></p>
</div>
</div>
<ul>
<li>
<p>DOT is a language that can describe graphs, for the sake of their visualisation</p>
</li>
<li>
<p>The most common implementation is the <a href="https://graphviz.org/">Graphviz toolkit</a></p>
</li>
</ul>
</section><section>
<h2 id="dsl-examples-pt-2">DSL Examples (pt. 2)</h2>
<h3 id="plantuml-a-dsl-to-visualise-uml-diagrams">PlantUML: a DSL to visualise UML diagrams</h3>
<div class="multiCol">
    <div class="col ">
    <pre tabindex="0"><code class="nohighlight" data-noescape="">interface Customer {
    + CustomerID getID()
    + String getName()
    + void **setName**(name: String)
    + String getEmail()
    + void **setEmail**(email: String)
}
<p>note left: Entity</p>
<p>interface CustomerID {
+ Object getValue()
}
note right: Value Object</p>
<p>interface TaxCode {
+ String getValue()
}
note left: Value Object</p>
<p>interface VatNumber {
+ long getValue()
}
note right: Value Object</p>
<p>VatNumber -d-|&gt; CustomerID
TaxCode -d-|&gt; CustomerID</p>
</code><p><code class="nohighlight" data-noescape="">Customer *-r- CustomerID
</code></p></pre><p></p>
</div>
<div class="col ">
    <figure id="plantuml-figure-0" class="plantuml" alt="" style="width: 100%;max-width: 95vw;max-height: 80vh;">
<p>interface Customer {
+ CustomerID getID()
+ String getName()
+ void <strong>setName</strong>(name: String)
+ String getEmail()
+ void <strong>setEmail</strong>(email: String)
}
note left: Entity</p>
<p>interface CustomerID {
+ Object getValue()
}
note right: Value Object</p>
<p>interface TaxCode {
+ String getValue()
}
note left: Value Object</p>
<p>interface VatNumber {
+ long getValue()
}
note right: Value Object</p>
<p>VatNumber -d-|&gt; CustomerID
TaxCode -d-|&gt; CustomerID</p>
<p>Customer *-r- CustomerID</p>
</figure>
<script>
    handlePlantumlFigureByID("plantuml-figure-0");
</script>
</div>
</div>
</section><section>
<h2 id="dsl-examples-pt-3">DSL Examples (pt. 3)</h2>
<h3 id="gherkin-a-dsl-to-write-bdd-tests-in-a-human-friendly-way">Gherkin: a DSL to write BDD tests in a human-friendly way</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#080;font-weight:bold">Scenario:</span><span style="color:#06b;font-weight:bold"> Verify withdraw at the ATM works correctly
</span></span></span><span style="display:flex;"><span><span style="color:#06b;font-weight:bold"></span><span style="color:#080;font-weight:bold">Given </span><span style="color:#06b;font-weight:bold">John has </span><span style="color:#d20;background-color:#fff0f0">500</span><span style="color:#06b;font-weight:bold">$ on his account
</span></span></span><span style="display:flex;"><span><span style="color:#06b;font-weight:bold"></span><span style="color:#080;font-weight:bold">When </span><span style="color:#06b;font-weight:bold">John ask to withdraw </span><span style="color:#d20;background-color:#fff0f0">200</span><span style="color:#06b;font-weight:bold">$
</span></span></span><span style="display:flex;"><span><span style="color:#06b;font-weight:bold"></span><span style="color:#080;font-weight:bold">And </span><span style="color:#06b;font-weight:bold">John inserts the correct PIN
</span></span></span><span style="display:flex;"><span><span style="color:#06b;font-weight:bold"></span><span style="color:#080;font-weight:bold">Then </span><span style="color:#d20;background-color:#fff0f0">200</span><span style="color:#06b;font-weight:bold">$ are dispensed by the ATM
</span></span></span><span style="display:flex;"><span><span style="color:#06b;font-weight:bold"></span><span style="color:#080;font-weight:bold">And </span><span style="color:#06b;font-weight:bold">John has </span><span style="color:#d20;background-color:#fff0f0">300</span><span style="color:#06b;font-weight:bold">$ on his account
</span></span></span></code></pre></div><ul>
<li>
<p>Gherkin is a language that can describe <strong>behavioural tests</strong> for software systems</p>
<ul>
<li>i.e. what system should do in given scenario</li>
</ul>
</li>
<li>
<p>Syntax if very flexible and it seems like <em>natural language</em></p>
</li>
<li>
<p>Stakeholders and engineer will agree on a set of <strong>behavioural specifications</strong> for the system</p>
<ul>
<li>written in Gherking</li>
</ul>
</li>
<li>
<p>The most common implementation is <a href="https://cucumber.io/">Cucumber</a></p>
<ul>
<li>allowing the semi-automated translation of Gherkin specifications into <strong>executable tests</strong></li>
</ul>
</li>
</ul>
</section><section>
<h2 id="dsl-examples-pt-4">DSL Examples (pt. 4)</h2>
<h3 id="vhdl-a-dsl-to-design-hardware-circuits">VHDL: a DSL to design hardware circuits</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>DFF : <span style="color:#080;font-weight:bold">process</span>(RST, CLK) <span style="color:#080;font-weight:bold">is</span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">begin</span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">if</span> RST = <span style="color:#d20;background-color:#fff0f0">'1'</span> <span style="color:#080;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>Q &lt;= <span style="color:#d20;background-color:#fff0f0">'0'</span>;
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">elsif</span> rising_edge(CLK) <span style="color:#080;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>Q &lt;= D;
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">end</span> <span style="color:#080;font-weight:bold">if</span>;
</span></span><span style="display:flex;"><span><span style="color:#080;font-weight:bold">end</span> <span style="color:#080;font-weight:bold">process</span> <span style="color:#b06;font-weight:bold">DFF</span>;
</span></span></code></pre></div><ul>
<li>
<p>VHDL is a language that can describe <strong>hardware circuits</strong></p>
<ul>
<li>i.e. the logic gates and their interconnections</li>
</ul>
</li>
<li>
<p>Seems like an ordinary programming language, but:</p>
<ul>
<li>“variables” are indeed signals</li>
<li>“functions” are indeed circuits</li>
</ul>
</li>
<li>
<p>Technologies exist to <strong>automatically translate</strong> VHDL into <strong>hardware circuits</strong></p>
<ul>
<li>e.g. <a href="https://www.xilinx.com/products/design-tools/vivado.html">Xilinx Vivado</a></li>
</ul>
</li>
<li>
<p>… or to <strong>simulate</strong> the behaviour of the circuit (either <em>in software</em> or <em>in FPGA</em>)</p>
</li>
</ul>

</section>
</section><section>
<h2 id="dsl-examples-pt-5">DSL Examples (pt. 5)</h2>
<h3 id="strumentahttpsstrumentacoms-dsl-for-financial-accounting"><a href="https://strumenta.com">Strumenta</a>’s DSL for financial accounting</h3>
<p>Details here: <a href="https://tomassetti.me/financial-accounting-dsl">https://tomassetti.me/financial-accounting-dsl</a></p>
<blockquote>
<p><strong>Goal</strong>: use a DSL to describe taxes, pension contributions, and general financial calculations</p>
</blockquote>
<pre tabindex="0"><code>pension contribution InpsTerziario paid by owner {
    considered_salary = (taxable of IRES for employer - amount of IRES for employer - amount of IRAP for employer) by ownership share
    rate = brackets [to 46,123] -&gt; 22.74%,
                    [to 76,872] -&gt; 23.74%,
                    [above]     -&gt; 0%
    amount = (rate for considered_salary) with minimum 3,535.61
}

pension contribution InpsGLA paid by employer 2/3 and employee 1/3 {
    considered_salary = gross_compensation of employee
    rate = brackets [to 100,323] -&gt; 27.72%,
                    [above]      -&gt; 0%
    amount = rate for considered_salary
}
</code></pre></section><section>
<h2 id="benefits-of-adopting-dsl">Benefits of adopting DSL</h2>
<ol>
<li>
<p>To communicate with domain experts in their own language</p>
<ul>
<li>e.g. Gherkin is a language that can be understood by both engineers and stakeholders</li>
</ul>
</li>
<li>
<p>To let domain experts <strong>write</strong> the specifications (i.e. the model) of the system they want</p>
<ul>
<li>hence reducing ambiguities among stakeholders and engineers</li>
</ul>
</li>
<li>
<p>To focus on the <strong>domain</strong> rather than on the <strong>implementation</strong></p>
</li>
<li>
<p>To hide the <strong>implementation details</strong> from the domain experts</p>
<ul>
<li>e.g. exposing only business-related concepts, at the domain level</li>
</ul>
</li>
</ol>
</section><section>
<h2 id="dsl-vs-gpl">DSL vs. GPL</h2>
<ul>
<li>
<p>DSLs are <strong>not</strong> a replacement for GPLs</p>
<ul>
<li>they are <strong>complementary</strong></li>
</ul>
</li>
<li>
<p>Yet the difference is fuzzy, so lets try to clarify:</p>
</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center"><strong>GPL</strong></th>
<th style="text-align:center"><strong>DSL</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong>Domain</strong></td>
<td style="text-align:center">any</td>
<td style="text-align:center">clear boundary</td>
</tr>
<tr>
<td style="text-align:center"><strong>Syntactical constructs</strong></td>
<td style="text-align:center">many and composable</td>
<td style="text-align:center">few and static</td>
</tr>
<tr>
<td style="text-align:center"><strong>Expressiveness</strong></td>
<td style="text-align:center">Turing-complete</td>
<td style="text-align:center">possibly, less than Turing-complete</td>
</tr>
<tr>
<td style="text-align:center"><strong>Customisability</strong></td>
<td style="text-align:center">maximised</td>
<td style="text-align:center">minimised / confined / absent</td>
</tr>
<tr>
<td style="text-align:center"><strong>Defined by</strong></td>
<td style="text-align:center">companies or committees</td>
<td style="text-align:center">teams of domain expertes</td>
</tr>
<tr>
<td style="text-align:center"><strong>User base</strong></td>
<td style="text-align:center">large, anonymous, widespread</td>
<td style="text-align:center">small, accessible, local</td>
</tr>
<tr>
<td style="text-align:center"><strong>Evolution</strong></td>
<td style="text-align:center">slow, well-structured</td>
<td style="text-align:center">fast-paced</td>
</tr>
<tr>
<td style="text-align:center"><strong>Deprecation</strong></td>
<td style="text-align:center">very slow</td>
<td style="text-align:center">feasible, often abrupt</td>
</tr>
</tbody>
</table>
</section><section>
<h1 id="dsl-engineering">DSL Engineering</h1>
</section><section>
<h2 id="semantics-of-dsl">Semantics of DSL</h2>
<ul>
<li>
<p>Most often, the focus is on the <strong>syntax</strong> of the DSL</p>
<ul>
<li>as that’s how users will perceive it</li>
</ul>
</li>
<li>
<p>Yet, the <strong>semantics</strong> of the DSL is equally important</p>
<ul>
<li>that dictates how the DSL <strong>works</strong></li>
<li>and this is what engineers (DSL implementers) focus upon</li>
</ul>
</li>
<li>
<p>Intuitively, <strong>semantics</strong> is given to languages by writing the machinery supporting their execution</p>
<ul>
<li>three main aspects:
<ol>
<li><strong>conversion</strong> into <em>runnable code</em> (e.g. <em>translation</em> or <em>interpretation</em>) …</li>
<li>… leveraging onto a <strong>execution engine</strong> (i.e. <em>library functionalities</em> supporting the runnable code) …</li>
<li>… in turn relying on a <strong>software platform</strong> (e.g. JVM, .NET, etc.)</li>
</ol>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>The role of <em>DSL engineers</em> mostly focuses on <strong>steps 1</strong> &amp; <strong>2</strong> (other than defining the <strong>syntax</strong>)</p>
</blockquote>
</section><section>
<h2 id="converting-dsl-into-runnable-code">Converting DSL into runnable code</h2>
<p>Two main approaches:</p>
<ul>
<li>
<p><strong>Translation</strong>: translates a DSL script into a language for which an <em>execution engine</em> on a given <em>target platform</em> exists</p>
<ul>
<li>a.k.a. <strong>code generation</strong> or <em>transpilation</em> if the target language is high-level (e.g. Java, JS, or C#)
<ul>
<li>e.g. <a href="https://eclipse.dev/Xtext/xtend/">Xtend</a>, or <a href="https://www.typescriptlang.org/">TypeScript</a>, despite being GPL, are transpiled into Java and JS respectively</li>
</ul>
</li>
<li>a.k.a. <strong>compilation</strong> if the target language is low-level (e.g. assembly, JVM bytecode, CRL, etc.)
<ul>
<li>e.g. Java is compiled into JVM bytecode (despite being a GPL)</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Interpretation</strong>: the execution engine is able to <em>parse and execute</em> the DSL script <em>directly</em></p>
<ul>
<li>a.k.a. <strong>runtime interpretation</strong> or <em>runtime compilation</em> if the execution engine is able to compile the DSL script into a runnable code
<ul>
<li>e.g. <a href="https://github.com/tuProlog/2p-kt">2P-Kt</a> is a GPL interpreted by a custom execution engine, written in Kotlin, running on the JVM</li>
</ul>
</li>
</ul>
</li>
</ul>
<br>
<p>In both cases, there are technical <strong>prerequisites</strong>:</p>
<ul>
<li>a <strong>parser</strong> for the actual syntax of the DSL should exist / be generated</li>
<li>the <strong>execution engine</strong> for the target platform should exist</li>
</ul>
</section><section>


<section data-shortcode-section="">
<h2 id="external-vs-internal-dsl">External vs. internal DSL</h2>
<ul>
<li>
<p>So far we discussed the so-called <strong>external DSLs</strong></p>
<ul>
<li>i.e. where the syntax is totally custom, hence requiring a <strong>custom parser</strong></li>
</ul>
</li>
<li>
<p>As opposed to <strong>internal</strong> (a.k.a. <em>embedded</em>) <strong>DSLs</strong></p>
<ul>
<li>i.e. where the syntax is a subset of some pre-existing GPL…</li>
<li>… whose syntax is <strong>flexible</strong> enough to allow <em>costimisation</em></li>
</ul>
</li>
<li>
<p>Creating <em>internal</em> DSL is a recent trend enabled by the wide adoption of flexible GPL</p>
<ul>
<li>e.g. Kotlin, Groovy, or Scala, which come with <em>ad-hoc constructs</em>
<ul>
<li>e.g. trailing-lambda convention, infix notation, operator overloading, etc.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Examples of <em>internal</em> DSL you may already know:</p>
<ul>
<li><a href="https://docs.gradle.org/current/userguide/kotlin_dsl.html">Kotlin DSL for Gradle</a></li>
<li><a href="https://www.scala-sbt.org/1.x/docs/sbt-by-example.html">SBT</a></li>
</ul>
</li>
<li>
<p>More on this topic will be introduced by prof. Pianini in future lectures</p>
</li>
</ul>
</section><section>
<h2 id="example-of-internal-dsl-buildgradlekts">Example of internal DSL: <code>build.gradle.kts</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>plugins {
</span></span><span style="display:flex;"><span>    <span style="color:#a61717;background-color:#e3d2d2">`</span>java-library<span style="color:#a61717;background-color:#e3d2d2">`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>dependencies {                              
</span></span><span style="display:flex;"><span>    api(<span style="color:#d20;background-color:#fff0f0">"junit:junit:4.13"</span>)
</span></span><span style="display:flex;"><span>    implementation(<span style="color:#d20;background-color:#fff0f0">"junit:junit:4.13"</span>)
</span></span><span style="display:flex;"><span>    testImplementation(<span style="color:#d20;background-color:#fff0f0">"junit:junit:4.13"</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>configurations {                            
</span></span><span style="display:flex;"><span>    implementation {
</span></span><span style="display:flex;"><span>        resolutionStrategy.failOnVersionConflict()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sourceSets {                                
</span></span><span style="display:flex;"><span>    main {                                  
</span></span><span style="display:flex;"><span>        java.srcDir(<span style="color:#d20;background-color:#fff0f0">"src/core/java"</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>java {                                      
</span></span><span style="display:flex;"><span>    sourceCompatibility = <span style="color:#b06;font-weight:bold">JavaVersion</span>.VERSION_11
</span></span><span style="display:flex;"><span>    targetCompatibility = <span style="color:#b06;font-weight:bold">JavaVersion</span>.VERSION_11
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>tasks {
</span></span><span style="display:flex;"><span>    test {                                  
</span></span><span style="display:flex;"><span>        testLogging.showExceptions = <span style="color:#080;font-weight:bold">true</span>
</span></span><span style="display:flex;"><span>        useJUnit()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>domain: build-automation</li>
<li>this is pure Kotlin + Gradle library (containing an “<em>execution engine</em>”)</li>
<li>Gradle library is designed to be used as Kotlin DSL</li>
</ul>
</section><section>
<h2 id="key-aspects-of-_internal_-dsl">Key aspects of <em>internal</em> DSL</h2>
<ul>
<li>
<p>Internal DSL may <strong>ease adoption</strong> of the DSL it self</p>
<ul>
<li>users may <em>already know</em> the GPL
<ul>
<li>hence they may be able to use the DSL <em>without learning a new language</em></li>
<li>hence they may use the same <strong>toolkits</strong> <em>available for the GPL</em> (e.g. debugger, IDE, etc.)</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Internal DSL <strong>simplify</strong> the <strong>DSL engineering</strong> process</p>
<ul>
<li><em>no need</em> to write and maintain a <strong>custom parser</strong>
<ul>
<li>as the parser is <em>already</em> provided by the GPL</li>
</ul>
</li>
<li><em>no need</em> to write and maintain <strong>custom toolkits</strong>
<ul>
<li>as the GPL toolkits may be <em>reused</em></li>
</ul>
</li>
</ul>
</li>
<li>
<p>The <strong>integration</strong> among the GPL and the DSL is <strong>tight</strong></p>
<ul>
<li>the DSL may exploit the <strong>constructs of the GPL</strong>, and this is commonly <em>desired</em></li>
<li>the DSL is <strong>technologically</strong> and <strong>syntactically bound</strong> to the GPL, and this is commonly <em>undesired</em></li>
</ul>
</li>
</ul>
</section><section>
<h2 id="about-the-execution-engine">About the execution engine</h2>
<ul>
<li>
<p>Be it internal/external or transpiled/interpreted, the DSL needs an <strong>execution engine</strong></p>
<ul>
<li>i.e. a library providing the <strong>functionalities</strong> of the DSL</li>
</ul>
</li>
<li>
<p>This is <em>no different</em> from <strong>any other library</strong> supporting some given domain</p>
</li>
<li>
<p>Except that hacks could exploit to ease the adoption of the <strong>target DSL syntax</strong></p>
</li>
</ul>

</section>
</section><section>
<h1 id="mdd-in-practice">MDD in Practice</h1>
</section><section>
<h2 id="tools-for-mdd">Tools for MDD</h2>
<ul>
<li>
<p>Eclipse’s <a href="https://eclipse.dev/Xtext/">Xtext</a> widespread tool for MDD</p>
</li>
<li>
<p>JetBrains’ <a href="https://www.jetbrains.com/mps/">MPS</a> main competitor of Xtext</p>
</li>
<li>
<p><a href="https://langium.org">Langium</a> clone of Xtext, but based on TypeScript</p>
</li>
</ul>
<h3 id="other-relevant-tools-for-language-engineering">Other relevant tools for language engineering</h3>
<ul>
<li>
<p><a href="https://www.antlr.org/">ANTLR</a> only parser generation for Java, JS, Python, .Net, C++</p>
</li>
<li>
<p><a href="https://microsoft.github.io/language-server-protocol/overviews/lsp/overview/">Language Server Protocol</a> (LSP)</p>
</li>
</ul>
</section><section>
<h2 id="key-idea-behind-lsp">Key idea behind LSP</h2>
<p><img src="./lsp.png" alt="LSP concept"></p>
<ul>
<li>
<p>de-facto standard protocol among IDEs</p>
</li>
<li>
<p>providing various IDE-like capabilities as-a-service</p>
</li>
<li>
<p>making it easier to support multiple IDEs for the same language</p>
</li>
<li>
<p>must-have feature for any MDD tool we may consider for our DSL</p>
</li>
</ul>
</section><section>
<h2 id="about-xtext">About Xtext</h2>
<ul>
<li>
<p>A framework for MDD and in particular domain-specific languages</p>
</li>
<li>
<p>Xtext provides a language for definining languages…</p>
</li>
<li>
<p>… which is also a meta-modelling language</p>
</li>
<li>
<p>Meta-modelling and DSL definition are done simultaneously</p>
</li>
<li>
<p>It automatically generates the full language infrastructure, including</p>
<ul>
<li>model interfaces / classes (<a href="https://eclipse.dev/modeling/emf/">EMF</a> compliant)</li>
<li>parser</li>
<li>validator (with pluggable rules)</li>
<li>transpiler stub</li>
<li>scoping (with pluggable rules)</li>
<li>IDE support via LSP</li>
<li>syntax colouring</li>
<li>etc.</li>
<li>test stubs</li>
</ul>
</li>
<li>
<p>Exercises and examples about MDD will be based on Xtext</p>
</li>
</ul>
</section>

  


</div>
      

    </div>
<script type="text/javascript" src="/reveal-hugo/object-assign.js"></script>

<a href="/reveal-js/dist/print/" id="print-location" style="display: none;"></a>

<script type="application/json" id="reveal-hugo-site-params">{"custom_theme":"custom-theme.scss","custom_theme_compile":true,"height":"1080","history":true,"mermaid":[{"fontFamily":"Inconsolata","gitGraph":{"mainBranchName":"master","rotateCommitLabel":true},"startOnLoad":false,"theme":"default","useMaxWidth":false}],"pdfseparatefragments":false,"slide_number":true,"theme":"white","transition":"slide","transition_speed":"fast","width":"1920"}</script>
<script type="application/json" id="reveal-hugo-page-params">{"custom_theme_options":{"enablesourcemap":true,"targetpath":"css/custom-theme.css"}}</script>

<script src="/reveal-js/dist/reveal.js"></script>


  
  
  <script type="text/javascript" src="/reveal-js/plugin/markdown/markdown.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/highlight/highlight.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/zoom/zoom.js"></script>
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>
  
  
  <script type="text/javascript" src="/reveal-js/plugin/notes/notes.js"></script>




<script type="text/javascript">
  
  
  function camelize(map) {
    if (map) {
      Object.keys(map).forEach(function(k) {
        newK = k.replace(/(\_\w)/g, function(m) { return m[1].toUpperCase() });
        if (newK != k) {
          map[newK] = map[k];
          delete map[k];
        }
      });
    }
    return map;
  }

  var revealHugoDefaults = { center: true, controls: true, history: true, progress: true, transition: "slide" };

  var revealHugoPlugins = { 
    plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
   };
  var revealHugoSiteParams = JSON.parse(document.getElementById('reveal-hugo-site-params').innerHTML);
  var revealHugoPageParams = JSON.parse(document.getElementById('reveal-hugo-page-params').innerHTML);
  
  var options = Object.assign({},
    camelize(revealHugoDefaults),
    camelize(revealHugoSiteParams),
    camelize(revealHugoPageParams),
    camelize(revealHugoPlugins));
  Reveal.initialize(options);
</script>






  

  
    
  

  
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  



  <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({"fontFamily":"Inconsolata","gitGraph":{"mainBranchName":"master","rotateCommitLabel":true},"startOnLoad":false,"theme":"default","useMaxWidth":false});

    let render = (event) => {
      let mermaidElems = event.currentSlide.querySelectorAll('.mermaid');
      if (!mermaidElems.length){
          return
      }
      mermaidElems.forEach(mermaidElem => {
          let processed = mermaidElem.getAttribute('data-processed');
          if (!processed){
              
              mermaid.init(undefined, mermaidElem);
          }
      });
    };
    
    render({currentSlide: Reveal.getCurrentSlide()});

    Reveal.on('slidechanged', render);
    Reveal.on('ready', render);
  </script>

    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
</script>

<script type="text/javascript" id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>

<script>
  if (/.*?(\?|&)print-pdf/.test(window.location.toString())) {
      var ytVideos = document.getElementsByTagName("iframe")
      for (let i = 0; i < ytVideos.length; i++) {
          var videoFrame = ytVideos[i]
          var isYouTube = /^https?:\/\/(www.)youtube\.com\/.*/.test(videoFrame.src)
          if (isYouTube) {
              console.log(`Removing ${videoFrame.src}`)
              var parent = videoFrame.parentElement
              videoFrame.remove()
              var p = document.createElement('p')
              p.append(
                  document.createTextNode(
                      "There was an embedded video here, but it is disabled in the printed version of the slides."
                  )
              )
              p.append(document.createElement('br'))
              p.append(
                  document.createTextNode(
                      `Visit instead ${
                          videoFrame.src
                      } or ${
                          videoFrame.src.replace(
                              /(^https?:\/\/(www.)youtube\.com)\/(embed\/)(\w+).*/,
                              "https://www.youtube.com/watch?v=$4"
                          )
                      }`
                  )
              )
              parent.appendChild(p)
          }
      }
  }
</script>

    
  

</body></html>